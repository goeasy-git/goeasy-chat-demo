!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.GoEasyIM=t():e.GoEasyIM=t()}(window,(function(){return function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=2)}([function(e,t){function n(t){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?e.exports=n=function(e){return typeof e}:e.exports=n=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(t)}e.exports=n},function(e,t,n){e.exports=function(e){function t(o){if(n[o])return n[o].exports;var r=n[o]={exports:{},id:o,loaded:!1};return e[o].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function o(){if(f()&&!0!==uni.overrideShowHideAlready&&void 0!==getApp().$options){uni.overrideShowHideAlready=!0;var e=getApp().$options.onShow[0],t=getApp().$options.onHide[0];getApp().$options.onShow[0]=function(){getApp().uniAppRunningBackend=!1,e()},getApp().$options.onHide[0]=function(){getApp().uniAppRunningBackend=!0,t()}}}var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=n(1),s=n(35),c=function(){this.currentNumber=this.initialCurrentNumber()};c.prototype={maxNumber:parseInt("10"),number:function(){return this.currentNumber},initialCurrentNumber:function(){var e=this;return l()?e.currentNumber=parseInt(a("goeasyNode")):e.currentNumber||(e.currentNumber=h(1,parseInt("10"))),e.currentNumber>0&&e.currentNumber<this.maxNumber?e.currentNumber=e.currentNumber+1:e.currentNumber==this.maxNumber?e.currentNumber=1:e.currentNumber=Math.floor(Math.random()*this.maxNumber+1),l()&&u("goeasyNode",e.currentNumber),e.currentNumber}};var a=function(e){return window.localStorage?window.localStorage.getItem(e):function(e){var t,n=new RegExp("(^| )"+e+"=([^;]*)(;|$)");return(t=document.cookie.match(n))?unescape(t[2]):null}(e)},u=function(e,t){window.localStorage?window.localStorage.setItem(e,t):function(e,t){var n=new Date;n.setTime(n.getTime()+2592e6),document.cookie=e+"="+escape(t)+";expires="+n.toGMTString()}(e,t)},p=function(){Array.apply(this)},h=function(e,t){return Math.floor(Math.random()*(e-t)+t)},f=function(){return!("object"!==("undefined"==typeof uni?"undefined":r(uni))||!uni.getSystemInfo)},l=function(){return f()?"function"==typeof WebSocket&&"function"==typeof XMLHttpRequest:!(d()||"undefined"!=typeof wx&&wx.getLocation&&("function"!=typeof WebSocket||"function"!=typeof XMLHttpRequest)||"object"===("undefined"==typeof tt?"undefined":r(tt))&&tt.getSystemInfo)},d=function(){return"undefined"!=typeof navigator&&"ReactNative"==navigator.product},y=new c,m=function(e){if(JSON.stringify(e),this._isEmpty(e.appkey))void 0!==e.onConnectFailed&&e.onConnectFailed({code:400,content:"appkey is required"});else if(this._copyConfig(e),void 0!==e.host){var t="://"+y.number()+e.host,n="";l()?(n=!1===e.forceTLS?"http"+t+":80":"https"+t+":443",this.socket=i.connect(n,{transports:["polling","websocket"],timeout:1500})):(n="https://wx-"+e.host+":443",this.socket=i(n,{transports:["websocket"],reconnectionDelayMax:3e3})),this._callbackEvents(e)}else e.onConnectFailed({code:400,content:"host is required"})};m.goEasyDomainNumber=y,"undefined"!=typeof window&&(window._GoEasy_=m),Date.prototype.formatDate=function(e){var t={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};for(var n in/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length))),t)t.hasOwnProperty(n)&&new RegExp("("+n+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?t[n]:("00"+t[n]).substr((""+t[n]).length)));return e},(p.prototype=new Array).indexOfGuid=function(e){for(var t=0;t<this.length;t++)if(this[t]==e)return t;return-1},p.prototype.unshiftGuid=function(e){var t=!1,n=this.indexOfGuid(e);for(n>-1&&(t=!0,this.splice(n,1)),this.unshift(e);this.length>300;)this.pop();return t},m.prototype={debug:!1,socket:null,networkStatus:"initial",authorizeResult:null,subscribeBuffer:[],subscriptions:[],subscriptionChannelUUIDs:[],maxRetries:3,_manualConnect:!1,_manualDisconnectStatus:"initial",authorizeStatus:"initial",receivedGuids:new p,type:null,_copyConfig:function(e){this._appkey=e.appkey,this._otp=e.otp,this._isEmpty(e.userId)?(this._userId="anonymous-"+Math.floor(1e5*Math.random()+1),e.userId=this._userId):this._userId=this._trim(e.userId),this._isEmpty(e.userData)?this._userData="":this._userData=this._trim(e.userData),1==e.debug&&(this.debug=!0),this._isEmpty(e.type)||(this.type=e.type)},validateSubscription:function(e){var t=e.channel,n=e.channels;if(void 0===t&&void 0===n)return e.onFailed({code:400,content:"channel is required"}),!1;if(void 0!==t&&void 0!==n)return e.onFailed({code:400,content:"subscribe to either channel or channels, not both"}),!1;if(void 0!==t){if("number"==typeof t&&(t=t.toString()),this._isEmpty(t)&&void 0!==e.onFailed)return e.onFailed({code:400,content:"channel is required"}),!1}else{if(!this._isArray(n)||0===n.length)return e.onFailed({code:400,content:"channels must be an array"}),!1;if(this._isArray(n)&&n.length>500)return e.onFailed({code:400,content:"channels over max length:500"}),!1;if(this._isArray(n)&&n.length>0)for(var o=0;o<n.length;o++){var r=n[o];if(this._isEmpty(r)&&void 0!==e.onFailed)return e.onFailed({code:400,content:"Channels array contains empty channel"}),!1}}return!0},subscribe:function(e){if(o(),JSON.stringify(e),this.validateSubscription(e)){var t=e.channel;if(void 0!==t){"number"==typeof t&&(t=t.toString());var n=[];n.push(t),e.channels=n}this.handleSubscribe(e)}},handleSubscribe:function(e){e.uuid=this.uuid_goeasy(),this.subscribeBuffer[e.uuid]=e;var t=this;null!=t.authorizeResult&&"connected"==t.networkStatus&&(e.checking=!0,t.doSubscribeAndCheckAck(e))},doSubscribe:function(e){JSON.stringify(e);var t=this;if(200==t.authorizeResult.code){var n={channels:e.channels,sid:t.authorizeResult.sid};JSON.stringify(n),t.socket.emit("subscribe",n,(function(n){if(JSON.stringify(n),1!=e.finish)if(e.finish=!0,delete t.subscribeBuffer[e.uuid],JSON.stringify(e),200==n.resultCode){t.subscriptions[e.uuid]=e;for(var o=0;o<e.channels.length;o++){var r=e.channels[o];"number"==typeof r&&(r=r.toString()),t.subscriptionChannelUUIDs[r]=e.uuid}void 0!==e.onSuccess&&e.onSuccess()}else void 0!==e.onFailed&&e.onFailed({code:n.resultCode,content:n.content})}))}else t.authorizeResult.code},doSubscribeAndCheckAck:function(e){JSON.stringify(e),e.finish=!1;var t=this;t.doSubscribe(e);var n=setInterval((function(){e.finish||"connected"!=t.networkStatus?(JSON.stringify(e),e.checking=!1,clearInterval(n)):(JSON.stringify(e),t.doSubscribe(e))}),1300)},subscribePresence:function(e){if(this.validateSubscription(e)){var t=e.channels,n=[];if(this._isArray(t)){for(var o=0;o<t.length;o++){var r=t[o];"number"==typeof r&&(r=r.toString());var i=r+"_presence";n.push(i)}e.channels=n}else{var s=e.channel;"number"==typeof s&&(s=s.toString()),n.push(s+"_presence"),e.channels=n}this.handleSubscribe(e)}},unsubscribe:function(e){function t(){200==r.authorizeResult.code?r.socket.emit("unsubscribe",{sid:r.authorizeResult.sid,channel:e.channel},(function(t){if(i=!0,200==t.resultCode){delete r.subscriptionChannelUUIDs[e.channel];for(var n=r.subscriptions[o].channels,s=0;s<n.length;s++)(e.channel=n[s])&&n.splice(s,1);JSON.stringify(e),void 0!==e.onSuccess&&e.onSuccess()}else void 0!==e.onFailed&&e.onFailed({code:t.resultCode,content:t.content})})):(i=!0,void 0!==e.onFailed&&e.onFailed({code:r.authorizeResult.code,content:r.authorizeResult.content}))}function n(){t();var n=setInterval((function(){!i&&"connected"==r.networkStatus&&s<0?(s++,t()):s==r.maxRetries?(clearInterval(n),void 0!==e.onFailed&&e.onFailed({code:408,content:"Server unreachable or timeout"})):clearInterval(n)}),1e3)}if("number"==typeof e.channel&&(e.channel=e.channel.toString()),this._isEmpty(e.channel))return this.log("'channel' is required."),void(void 0!==e.onFailed&&e.onFailed({code:400,content:"channel is required"}));var o=this.subscriptionChannelUUIDs[e.channel];if(this._isEmpty(o))return this.log("'channel' is not subscribed."),void(void 0!==e.onFailed&&e.onFailed({code:400,content:"channel["+e.channel+"] is not subscribed"}));var r=this,i=!1,s=0;if(null!=this.authorizeResult&&"connected"==r.networkStatus)n();else var c=setInterval((function(){null!=r.authorizeResult&&"connected"==r.networkStatus?(clearInterval(c),n()):++s==r.maxRetries&&(clearInterval(c),void 0!==e.onFailed&&e.onFailed({code:408,content:"Server unreachable or timeout"}))}),1e3)},unsubscribePresence:function(e){return"number"==typeof e.channel&&(e.channel=e.channel.toString()),this._isEmpty(e.channel)?void(void 0!==e.onFailed&&e.onFailed({code:400,content:"channel is required"})):(e.channel=e.channel+"_presence",void this.unsubscribe(e))},publish:function(e){function t(t){200==r.authorizeResult.code?r.socket.emit("publish",{sid:r.authorizeResult.sid,channel:e.channel,content:e.message,guid:t,retried:s},(function(t){i=!0,200==t.resultCode?void 0!==e.onSuccess&&e.onSuccess():void 0!==e.onFailed&&e.onFailed({code:t.resultCode,content:t.content})})):(i=!0,void 0!==e.onFailed&&e.onFailed({code:r.authorizeResult.code,content:r.authorizeResult.content}))}function n(){var n=r.uuid_goeasy();t(n);var o=setInterval((function(){!i&&s<r.maxRetries?(s++,t(n)):s==r.maxRetries?(clearInterval(o),void 0!==e.onFailed&&e.onFailed({code:408,content:"Server unreachable or timeout"})):clearInterval(o)}),1e3)}if(o(),"number"==typeof e.channel&&(e.channel=e.channel.toString()),this._isEmpty(e.channel))return this.log("'channel' is required."),void(void 0!==e.onFailed&&e.onFailed({code:400,content:"channel is required"}));if(this._isEmpty(e.message))return this.log("'message' is required."),void(void 0!==e.onFailed&&e.onFailed({code:400,content:"message is required"}));var r=this,i=!1,s=0;if(null!=this.authorizeResult&&"connected"==r.networkStatus)n();else var c=setInterval((function(){null!=r.authorizeResult&&"connected"==r.networkStatus?(clearInterval(c),n()):++s==r.maxRetries&&(clearInterval(c),void 0!==e.onFailed&&e.onFailed({code:408,content:"Server unreachable or timeout"}))}),1e3)},hereNow:function(e,t){var n={channels:[],includeUsers:!1,distinct:!1};if("undefined"!==e.channels)for(var o=0;o<e.channels.length;o++){var r=e.channels[o];"number"==typeof r&&(r=r.toString()),n.channels.push(r)}1==e.includeUsers&&(n.includeUsers=!0),1==e.distinct&&(n.distinct=!0),this.socket.emit("hereNow",n,(function(e){void 0!==t&&t(e)}))},hereNowByUserIds:function(e,t){var n={userIds:[],distinct:!0};"undefined"!==e.userIds&&(n.userIds=e.userIds),0==e.distinct&&(n.distinct=!1),void 0!==t&&(0===n.userIds.length?t({code:400,content:"userIds is required"}):n.userIds.length>500?t({code:400,content:"userIds is over max length 500"}):this.socket.emit("hereNowByUserIds",n,(function(e){t(e)})))},history:function(e,t){return"number"==typeof e.channel&&(e.channel=e.channel.toString()),this._isEmpty(e.channel)?void(void 0!==t&&t({code:400,content:"channel is required"})):void this.socket.emit("historyMessages",e,(function(e){void 0!==t&&t(e)}))},disconnect:function(){var e=this;this._manualDisconnectStatus="disconnecting","connected"===this.networkStatus&&"authorized"===this.authorizeStatus&&200===this.authorizeResult.code?e.tryEmit("manualDisconnect",null,(function(){e.socket.disconnect()}),(function(){e._manualDisconnectStatus="disconnected"})):this.socket.disconnect()},disconnected:function(){return"disconnected"===this.networkStatus},reconnect:function(){this._manualConnect=!0,this.socket.connect()},tryEmit:function(e,t,n,o){function r(){i.socket.emit(e,t,(function(e){s=!0,void 0!==o&&o(e)}))}var i=this,s=!1,c=0;r();var a=setInterval((function(){var e=c===i.maxRetries;s||e?(clearInterval(a),e&&void 0!==n&&n()):(c++,"undefined"!==t.retried&&(t.retried=c),r())}),1e3)},_callbackEvents:function(e){var t=this;this.socket.on("message",(function(e,n){var o=JSON.parse(e);if(!t.receivedGuids.unshiftGuid(o.i)){o.a&&t.socket.emit("ack",{publishGuid:o.i});var r=t.subscriptionChannelUUIDs[o.n];if(t._endWith(o.n,"presence"))void 0!==t.subscriptions[r].onPresence&&t.subscriptions[r].onPresence(JSON.parse(o.c));else if(void 0!==t.subscriptions[r].onMessage){var i={time:o.t,channel:o.n,content:o.c};o.s&&(i.senderId=o.s),t.subscriptions[r].onMessage(i)}}})),this.socket.on("connect",(function(){function n(){JSON.stringify(r),t._isEmpty(r.artifactVersion)&&t.sendlogs(),t.socket.emit("authorize",r,(function(n){if(JSON.stringify(n),!i)if(i=!0,t.authorizeStatus="authorized",t._manualDisconnectStatus="initial",null==t.authorizeResult&&(t.authorizeResult={}),t.authorizeResult.code=n.resultCode,t.authorizeResult.content=n.content,200==n.resultCode){if(o(),null==t.authorizeResult.sid)t.authorizeResult.sid=n.sid;else if(t.authorizeResult.sid!=n.sid)for(var r in t.authorizeResult.sid=n.sid,t.subscriptions)t.subscriptions.hasOwnProperty(r)&&(JSON.stringify(t.subscriptions[r]),t.doSubscribeAndCheckAck(t.subscriptions[r]));for(var s in t.subscribeBuffer)t.subscribeBuffer.hasOwnProperty(s)&&(JSON.stringify(t.subscribeBuffer[s]),t.doSubscribeAndCheckAck(t.subscribeBuffer[s]));void 0!==e.onConnected&&e.onConnected()}else void 0!==e.onConnectFailed&&e.onConnectFailed({code:n.resultCode,content:n.content})}))}if("disconnecting"!==t._manualDisconnectStatus&&"disconnected"!==t._manualDisconnectStatus||t._manualConnect){t.authorizeStatus="authorizing",t.networkStatus="connected";var r={appkey:t._appkey,userId:t._userId,userData:t._userData,otp:t._otp,artifactVersion:"1.0.13",type:t.type};null!=t.authorizeResult&&(r.sid=t.authorizeResult.sid);var i=!1;n();var s=setInterval((function(){i||"connected"!=t.networkStatus?clearInterval(s):n()}),1300)}})),this.socket.on("connect_error",(function(t){void 0!==e.onConnectFailed&&e.onConnectFailed({code:408,content:t})})),this.socket.on("disconnect",(function(){t.networkStatus="disconnected",t.authorizeStatus="initial",t._manualConnect=!1,null==t.authorizeResult&&(t.authorizeResult={}),t.authorizeResult.code=408,t.authorizeResult.content="Server unreachable or timeout",void 0!==e.onDisconnected&&e.onDisconnected()}))},_isEmpty:function(e){return void 0===e||null==e||0==this._trim(e).length},_trim:function(e){return e.replace(/(^\s*)|(\s*$)/g,"")},_endWith:function(e,t){return new RegExp(t+"$").test(e)},_isArray:function(e){return"[object Array]"==Object.prototype.toString.call(e)},log:function(e){"undefined"!=typeof window&&window.console&&this.debug&&console.log(e)},uuid_goeasy:function(){return s().replace(/-/g,"")},sendlogs:function(){}};var g=function(){var e;return function(t){return e&&!e.disconnected()||(e=new m(t)),e}}();e.exports=g},function(e,t,n){"use strict";function o(e,t){"object"===(void 0===e?"undefined":r(e))&&(t=e,e=void 0),t=t||{};var n,o=i(e),s=o.source,u=o.id,p=o.path,h=a[u]&&p in a[u].nsps;return t.forceNew||t["force new connection"]||!1===t.multiplex||h?n=c(s,t):(a[u]||(a[u]=c(s,t)),n=a[u]),o.query&&!t.query&&(t.query=o.query),n.socket(o.path,t)}var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=n(2),s=n(5),c=n(8);n(4)("socket.io-client"),e.exports=t=o;var a=t.managers={};t.protocol=s.protocol,t.connect=o,t.Manager=n(8),t.Socket=n(30)},function(e,t,n){"use strict";var o=n(3);n(4)("socket.io-client:url"),e.exports=function(e,t){var n=e;t=t||"undefined"!=typeof location&&location,null==e&&(e=t.protocol+"//"+t.host),"string"==typeof e&&("/"===e.charAt(0)&&(e="/"===e.charAt(1)?t.protocol+e:t.host+e),/^(https?|wss?):\/\//.test(e)||(e=void 0!==t?t.protocol+"//"+e:"https://"+e),n=o(e)),n.port||(/^(http|ws)$/.test(n.protocol)?n.port="80":/^(http|ws)s$/.test(n.protocol)&&(n.port="443")),n.path=n.path||"/";var r=-1!==n.host.indexOf(":")?"["+n.host+"]":n.host;return n.id=n.protocol+"://"+r+":"+n.port,n.href=n.protocol+"://"+r+(t&&t.port===n.port?"":":"+n.port),n}},function(e,t){var n=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,o=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];e.exports=function(e){var t=e,r=e.indexOf("["),i=e.indexOf("]");-1!=r&&-1!=i&&(e=e.substring(0,r)+e.substring(r,i).replace(/:/g,";")+e.substring(i,e.length));for(var s=n.exec(e||""),c={},a=14;a--;)c[o[a]]=s[a]||"";return-1!=r&&-1!=i&&(c.source=t,c.host=c.host.substring(1,c.host.length-1).replace(/;/g,":"),c.authority=c.authority.replace("[","").replace("]","").replace(/;/g,":"),c.ipv6uri=!0),c}},function(e,t){"use strict";e.exports=function(){return function(){}}},function(e,t,n){"use strict";function o(){}function r(e){var n=""+e.type;if(t.BINARY_EVENT!==e.type&&t.BINARY_ACK!==e.type||(n+=e.attachments+"-"),e.nsp&&"/"!==e.nsp&&(n+=e.nsp+","),null!=e.id&&(n+=e.id),null!=e.data){var o=function(e){try{return JSON.stringify(e)}catch(e){return!1}}(e.data);if(!1===o)return h;n+=o}return n}function i(){this.reconstructor=null}function s(e){var n=0,o={type:Number(e.charAt(0))};if(null==t.types[o.type])return a("unknown packet type "+o.type);if(t.BINARY_EVENT===o.type||t.BINARY_ACK===o.type){for(var r="";"-"!==e.charAt(++n)&&(r+=e.charAt(n),n!=e.length););if(r!=Number(r)||"-"!==e.charAt(n))throw new Error("Illegal attachments");o.attachments=Number(r)}if("/"===e.charAt(n+1))for(o.nsp="";++n&&","!==(s=e.charAt(n))&&(o.nsp+=s,n!==e.length););else o.nsp="/";var i=e.charAt(n+1);if(""!==i&&Number(i)==i){for(o.id="";++n;){var s;if(null==(s=e.charAt(n))||Number(s)!=s){--n;break}if(o.id+=e.charAt(n),n===e.length)break}o.id=Number(o.id)}if(e.charAt(++n)){var c=function(e){try{return JSON.parse(e)}catch(e){return!1}}(e.substr(n));if(!1===c||o.type!==t.ERROR&&!p(c))return a("invalid payload");o.data=c}return o}function c(e){this.reconPack=e,this.buffers=[]}function a(e){return{type:t.ERROR,data:"parser error: "+e}}var u=(n(4)("socket.io-parser"),n(6)),p=n(7);t.protocol=4,t.types=["CONNECT","DISCONNECT","EVENT","ACK","ERROR","BINARY_EVENT","BINARY_ACK"],t.CONNECT=0,t.DISCONNECT=1,t.EVENT=2,t.ACK=3,t.ERROR=4,t.BINARY_EVENT=5,t.BINARY_ACK=6,t.Encoder=o,t.Decoder=i;var h=t.ERROR+'"encode error"';o.prototype.encode=function(e,t){t([r(e)])},u(i.prototype),i.prototype.add=function(e){var t;if("string"!=typeof e)throw new Error("Unknown type: "+e);t=s(e),this.emit("decoded",t)},i.prototype.destroy=function(){this.reconstructor&&this.reconstructor.finishedReconstruction()},c.prototype.takeBinaryData=function(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){var t=binary.reconstructPacket(this.reconPack,this.buffers);return this.finishedReconstruction(),t}return null},c.prototype.finishedReconstruction=function(){this.reconPack=null,this.buffers=[]}},function(e,t,n){function o(e){if(e)return function(e){for(var t in o.prototype)e[t]=o.prototype[t];return e}(e)}e.exports=o,o.prototype.on=o.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},o.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this},o.prototype.off=o.prototype.removeListener=o.prototype.removeAllListeners=o.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n=this._callbacks["$"+e];if(!n)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var o,r=0;r<n.length;r++)if((o=n[r])===t||o.fn===t){n.splice(r,1);break}return this},o.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),n=this._callbacks["$"+e];if(n)for(var o=0,r=(n=n.slice(0)).length;o<r;++o)n[o].apply(this,t);return this},o.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},o.prototype.hasListeners=function(e){return!!this.listeners(e).length}},function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},function(e,t,n){"use strict";function o(e,t){if(!(this instanceof o))return new o(e,t);e&&"object"===(void 0===e?"undefined":r(e))&&(t=e,e=void 0),(t=t||{}).path=t.path||"/socket.io",this.nsps={},this.subs=[],this.opts=t,this.reconnection(!1!==t.reconnection),this.reconnectionAttempts(t.reconnectionAttempts||1/0),this.reconnectionDelay(t.reconnectionDelay||1e3),this.reconnectionDelayMax(t.reconnectionDelayMax||5e3),this.randomizationFactor(t.randomizationFactor||.5),this.backoff=new f({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==t.timeout?2e4:t.timeout),this.readyState="closed",this.uri=e,this.connecting=[],this.lastPing=null,this.encoding=!1,this.packetBuffer=[];var n=t.parser||a;this.encoder=new n.Encoder,this.decoder=new n.Decoder,this.autoConnect=!1!==t.autoConnect,this.autoConnect&&this.open()}var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=n(9),s=n(30),c=n(6),a=n(5),u=n(32),p=n(33),h=(n(4)("socket.io-client:manager"),n(29)),f=n(34),l=Object.prototype.hasOwnProperty;e.exports=o,o.prototype.emitAll=function(){for(var e in this.emit.apply(this,arguments),this.nsps)l.call(this.nsps,e)&&this.nsps[e].emit.apply(this.nsps[e],arguments)},o.prototype.updateSocketIds=function(){for(var e in this.nsps)l.call(this.nsps,e)&&(this.nsps[e].id=this.generateId(e))},o.prototype.generateId=function(e){return("/"===e?"":e+"#")+this.engine.id},c(o.prototype),o.prototype.reconnection=function(e){return arguments.length?(this._reconnection=!!e,this):this._reconnection},o.prototype.reconnectionAttempts=function(e){return arguments.length?(this._reconnectionAttempts=e,this):this._reconnectionAttempts},o.prototype.reconnectionDelay=function(e){return arguments.length?(this._reconnectionDelay=e,this.backoff&&this.backoff.setMin(e),this):this._reconnectionDelay},o.prototype.randomizationFactor=function(e){return arguments.length?(this._randomizationFactor=e,this.backoff&&this.backoff.setJitter(e),this):this._randomizationFactor},o.prototype.reconnectionDelayMax=function(e){return arguments.length?(this._reconnectionDelayMax=e,this.backoff&&this.backoff.setMax(e),this):this._reconnectionDelayMax},o.prototype.timeout=function(e){return arguments.length?(this._timeout=e,this):this._timeout},o.prototype.maybeReconnectOnOpen=function(){!this.reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()},o.prototype.open=o.prototype.connect=function(e,t){if(~this.readyState.indexOf("open"))return this;this.engine=i(this.uri,this.opts);var n=this.engine,o=this;this.readyState="opening",this.skipReconnect=!1;var r=u(n,"open",(function(){o.onopen(),e&&e()})),s=u(n,"error",(function(t){if("undefined"!=typeof window){var n=parseInt(o.uri.match(/[1-9][0-9]*/g)[0]),r=window._GoEasy_.goEasyDomainNumber.initialCurrentNumber();o.uri=o.uri.replace(n,r)}if(o.cleanup(),o.readyState="closed",o.emitAll("connect_error",t),e){var i=new Error("Connection error");i.data=t,e(i)}else o.maybeReconnectOnOpen()}));if(!1!==this._timeout){var c=this._timeout,a=setTimeout((function(){r.destroy(),n.close(),n.emit("error","timeout"),o.emitAll("connect_timeout",c)}),c);this.subs.push({destroy:function(){clearTimeout(a)}})}return this.subs.push(r),this.subs.push(s),this},o.prototype.onopen=function(){this.cleanup(),this.readyState="open",this.emit("open");var e=this.engine;this.subs.push(u(e,"data",p(this,"ondata"))),this.subs.push(u(e,"ping",p(this,"onping"))),this.subs.push(u(e,"pong",p(this,"onpong"))),this.subs.push(u(e,"error",p(this,"onerror"))),this.subs.push(u(e,"close",p(this,"onclose"))),this.subs.push(u(this.decoder,"decoded",p(this,"ondecoded")))},o.prototype.onping=function(){this.lastPing=new Date,this.emitAll("ping")},o.prototype.onpong=function(){this.emitAll("pong",new Date-this.lastPing)},o.prototype.ondata=function(e){this.decoder.add(e)},o.prototype.ondecoded=function(e){this.emit("packet",e)},o.prototype.onerror=function(e){this.emitAll("error",e)},o.prototype.socket=function(e,t){function n(){~h(r.connecting,o)||r.connecting.push(o)}var o=this.nsps[e];if(!o){o=new s(this,e,t),this.nsps[e]=o;var r=this;o.on("connecting",n),o.on("connect",(function(){o.id=r.generateId(e)})),this.autoConnect&&n()}return o},o.prototype.destroy=function(e){var t=h(this.connecting,e);~t&&this.connecting.splice(t,1),this.connecting.length||this.close()},o.prototype.packet=function(e){var t=this;e.query&&0===e.type&&(e.nsp+="?"+e.query),t.encoding?t.packetBuffer.push(e):(t.encoding=!0,this.encoder.encode(e,(function(n){for(var o=0;o<n.length;o++)t.engine.write(n[o],e.options);t.encoding=!1,t.processPacketQueue()})))},o.prototype.processPacketQueue=function(){if(this.packetBuffer.length>0&&!this.encoding){var e=this.packetBuffer.shift();this.packet(e)}},o.prototype.cleanup=function(){for(var e=this.subs.length,t=0;t<e;t++)this.subs.shift().destroy();this.packetBuffer=[],this.encoding=!1,this.lastPing=null,this.decoder.destroy()},o.prototype.close=o.prototype.disconnect=function(){this.skipReconnect=!0,this.reconnecting=!1,"opening"===this.readyState&&this.cleanup(),this.backoff.reset(),this.readyState="closed",this.engine&&this.engine.close()},o.prototype.onclose=function(e){this.cleanup(),this.backoff.reset(),this.readyState="closed",this.emit("close",e),this._reconnection&&!this.skipReconnect&&this.reconnect()},o.prototype.reconnect=function(){if(this.reconnecting||this.skipReconnect)return this;var e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitAll("reconnect_failed"),this.reconnecting=!1;else{var t=this.backoff.duration();this.reconnecting=!0;var n=setTimeout((function(){e.skipReconnect||(e.emitAll("reconnect_attempt",e.backoff.attempts),e.emitAll("reconnecting",e.backoff.attempts),e.skipReconnect||(function(){var e=!1;return"object"===("undefined"==typeof uni?"undefined":r(uni))&&uni.getSystemInfo&&(e=!0),e&&!0===getApp().uniAppRunningBackend}()?(e.reconnecting=!1,e.reconnect(),e.emitAll("reconnect_error","Uniapp running backend, skipped reconnect...")):e.open((function(t){t?(e.reconnecting=!1,e.reconnect(),e.emitAll("reconnect_error",t.data)):e.onreconnect()}))))}),t);this.subs.push({destroy:function(){clearTimeout(n)}})}},o.prototype.onreconnect=function(){var e=this.backoff.attempts;this.reconnecting=!1,this.backoff.reset(),this.updateSocketIds(),this.emitAll("reconnect",e)}},function(e,t,n){"use strict";e.exports=n(10),e.exports.parser=n(15)},function(e,t,n){"use strict";function o(e,t){return this instanceof o?(t=t||{},e&&"object"===(void 0===e?"undefined":r(e))&&(t=e,e=null),e?(e=u(e),t.hostname=e.host,t.secure="https"===e.protocol||"wss"===e.protocol,t.port=e.port,e.query&&(t.query=e.query)):t.host&&(t.hostname=u(t.host).host),this.secure=null!=t.secure?t.secure:"undefined"!=typeof location&&"https:"===location.protocol,t.hostname&&!t.port&&(t.port=this.secure?"443":"80"),this.agent=t.agent||!1,this.hostname=t.hostname||("undefined"!=typeof location?location.hostname:"localhost"),this.port=t.port||("undefined"!=typeof location&&location.port?location.port:this.secure?443:80),this.query=t.query||{},"string"==typeof this.query&&(this.query=p.decode(this.query)),this.upgrade=!1!==t.upgrade,this.path=(t.path||"/engine.io").replace(/\/$/,"")+"/",this.forceJSONP=!!t.forceJSONP,this.jsonp=!1!==t.jsonp,this.forceBase64=!!t.forceBase64,this.enablesXDR=!!t.enablesXDR,this.timestampParam=t.timestampParam||"t",this.timestampRequests=t.timestampRequests,this.transports=t.transports||["polling","websocket"],this.transportOptions=t.transportOptions||{},this.readyState="",this.writeBuffer=[],this.prevBufferLen=0,this.policyPort=t.policyPort||843,this.rememberUpgrade=t.rememberUpgrade||!1,this.binaryType=null,this.onlyBinaryUpgrades=t.onlyBinaryUpgrades,this.perMessageDeflate=!1!==t.perMessageDeflate&&(t.perMessageDeflate||{}),!0===this.perMessageDeflate&&(this.perMessageDeflate={}),this.perMessageDeflate&&null==this.perMessageDeflate.threshold&&(this.perMessageDeflate.threshold=1024),this.pfx=t.pfx||null,this.key=t.key||null,this.passphrase=t.passphrase||null,this.cert=t.cert||null,this.ca=t.ca||null,this.ciphers=t.ciphers||null,this.rejectUnauthorized=void 0===t.rejectUnauthorized||t.rejectUnauthorized,this.forceNode=!!t.forceNode,this.isReactNative="undefined"!=typeof navigator&&"string"==typeof navigator.product&&"reactnative"===navigator.product.toLowerCase(),("undefined"==typeof self||this.isReactNative)&&(t.extraHeaders&&Object.keys(t.extraHeaders).length>0&&(this.extraHeaders=t.extraHeaders),t.localAddress&&(this.localAddress=t.localAddress)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingIntervalTimer=null,this.pingTimeoutTimer=null,void this.open()):new o(e,t)}var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=n(11),s=n(6),c=(n(4)("engine.io-client:socket"),n(29)),a=n(15),u=n(3),p=n(22);e.exports=o,o.priorWebsocketSuccess=!1,s(o.prototype),o.protocol=a.protocol,o.Socket=o,o.Transport=n(14),o.transports=n(11),o.parser=n(15),o.prototype.createTransport=function(e){var t=function(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}(this.query);t.EIO=a.protocol,t.transport=e;var n=this.transportOptions[e]||{};return this.id&&(t.sid=this.id),new i[e]({query:t,socket:this,agent:n.agent||this.agent,hostname:n.hostname||this.hostname,port:n.port||this.port,secure:n.secure||this.secure,path:n.path||this.path,forceJSONP:n.forceJSONP||this.forceJSONP,jsonp:n.jsonp||this.jsonp,forceBase64:n.forceBase64||this.forceBase64,enablesXDR:n.enablesXDR||this.enablesXDR,timestampRequests:n.timestampRequests||this.timestampRequests,timestampParam:n.timestampParam||this.timestampParam,policyPort:n.policyPort||this.policyPort,pfx:n.pfx||this.pfx,key:n.key||this.key,passphrase:n.passphrase||this.passphrase,cert:n.cert||this.cert,ca:n.ca||this.ca,ciphers:n.ciphers||this.ciphers,rejectUnauthorized:n.rejectUnauthorized||this.rejectUnauthorized,perMessageDeflate:n.perMessageDeflate||this.perMessageDeflate,extraHeaders:n.extraHeaders||this.extraHeaders,forceNode:n.forceNode||this.forceNode,localAddress:n.localAddress||this.localAddress,requestTimeout:n.requestTimeout||this.requestTimeout,protocols:n.protocols||void 0,isReactNative:this.isReactNative})},o.prototype.open=function(){var e;if(this.rememberUpgrade&&o.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket"))e="websocket";else{if(0===this.transports.length){var t=this;return void setTimeout((function(){t.emit("error","No transports available")}),0)}e=this.transports[0]}this.readyState="opening";try{e=this.createTransport(e)}catch(e){return this.transports.shift(),void this.open()}e.open(),this.setTransport(e)},o.prototype.setTransport=function(e){var t=this;this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",(function(){t.onDrain()})).on("packet",(function(e){t.onPacket(e)})).on("error",(function(e){t.onError(e)})).on("close",(function(){t.onClose("transport close")}))},o.prototype.probe=function(e){function t(){if(h.onlyBinaryUpgrades){var e=!this.supportsBinary&&h.transport.supportsBinary;p=p||e}p||(u.send([{type:"ping",data:"probe"}]),u.once("packet",(function(e){if(!p)if("pong"===e.type&&"probe"===e.data){if(h.upgrading=!0,h.emit("upgrading",u),!u)return;o.priorWebsocketSuccess="websocket"===u.name,h.transport.pause((function(){p||"closed"!==h.readyState&&(a(),h.setTransport(u),u.send([{type:"upgrade"}]),h.emit("upgrade",u),u=null,h.upgrading=!1,h.flush())}))}else{var t=new Error("probe error");t.transport=u.name,h.emit("upgradeError",t)}})))}function n(){p||(p=!0,a(),u.close(),u=null)}function r(e){var t=new Error("probe error: "+e);t.transport=u.name,n(),h.emit("upgradeError",t)}function i(){r("transport closed")}function s(){r("socket closed")}function c(e){u&&e.name!==u.name&&n()}function a(){u.removeListener("open",t),u.removeListener("error",r),u.removeListener("close",i),h.removeListener("close",s),h.removeListener("upgrading",c)}var u=this.createTransport(e,{probe:1}),p=!1,h=this;o.priorWebsocketSuccess=!1,u.once("open",t),u.once("error",r),u.once("close",i),this.once("close",s),this.once("upgrading",c),u.open()},o.prototype.onOpen=function(){if(this.readyState="open",o.priorWebsocketSuccess="websocket"===this.transport.name,this.emit("open"),this.flush(),"open"===this.readyState&&this.upgrade&&this.transport.pause)for(var e=0,t=this.upgrades.length;e<t;e++)this.probe(this.upgrades[e])},o.prototype.onPacket=function(e){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(this.emit("packet",e),this.emit("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"pong":this.setPing(),this.emit("pong");break;case"error":var t=new Error("server error");t.code=e.data,this.onError(t);break;case"message":this.emit("data",e.data),this.emit("message",e.data)}},o.prototype.onHandshake=function(e){this.emit("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this.upgrades=this.filterUpgrades(e.upgrades),this.pingInterval=e.pingInterval,this.pingTimeout=e.pingTimeout,this.onOpen(),"closed"!==this.readyState&&(this.setPing(),this.removeListener("heartbeat",this.onHeartbeat),this.on("heartbeat",this.onHeartbeat))},o.prototype.onHeartbeat=function(e){clearTimeout(this.pingTimeoutTimer);var t=this;t.pingTimeoutTimer=setTimeout((function(){"closed"!==t.readyState&&t.onClose("ping timeout")}),e||t.pingInterval+t.pingTimeout)},o.prototype.setPing=function(){var e=this;clearTimeout(e.pingIntervalTimer),e.pingIntervalTimer=setTimeout((function(){e.ping(),e.onHeartbeat(e.pingTimeout)}),e.pingInterval)},o.prototype.ping=function(){var e=this;this.sendPacket("ping",(function(){e.emit("ping")}))},o.prototype.onDrain=function(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0===this.writeBuffer.length?this.emit("drain"):this.flush()},o.prototype.flush=function(){"closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))},o.prototype.write=o.prototype.send=function(e,t,n){return this.sendPacket("message",e,t,n),this},o.prototype.sendPacket=function(e,t,n,o){if("function"==typeof t&&(o=t,t=void 0),"function"==typeof n&&(o=n,n=null),"closing"!==this.readyState&&"closed"!==this.readyState){(n=n||{}).compress=!1!==n.compress;var r={type:e,data:t,options:n};this.emit("packetCreate",r),this.writeBuffer.push(r),o&&this.once("flush",o),this.flush()}},o.prototype.close=function(){function e(){o.onClose("forced close"),o.transport.close()}function t(){o.removeListener("upgrade",t),o.removeListener("upgradeError",t),e()}function n(){o.once("upgrade",t),o.once("upgradeError",t)}if("opening"===this.readyState||"open"===this.readyState){this.readyState="closing";var o=this;this.writeBuffer.length?this.once("drain",(function(){this.upgrading?n():e()})):this.upgrading?n():e()}return this},o.prototype.onError=function(e){o.priorWebsocketSuccess=!1,this.emit("error",e),this.onClose("transport error",e)},o.prototype.onClose=function(e,t){"opening"!==this.readyState&&"open"!==this.readyState&&"closing"!==this.readyState||(clearTimeout(this.pingIntervalTimer),clearTimeout(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),this.readyState="closed",this.id=null,this.emit("close",e,t),this.writeBuffer=[],this.prevBufferLen=0)},o.prototype.filterUpgrades=function(e){for(var t=[],n=0,o=e.length;n<o;n++)~c(this.transports,e[n])&&t.push(e[n]);return t}},function(e,t,n){"use strict";var o=n(12),r=n(27);t.polling=function(e){var t=!1,n=!1;if(e.jsonp,"undefined"!=typeof location){var r="https:"===location.protocol,i=location.port;i||(i=r?443:80),t=e.hostname!==location.hostname||i!==e.port,n=e.secure!==r}return e.xdomain=t,e.xscheme=n,new o(e)},t.websocket=r},function(e,t,n){(function(t){"use strict";function o(){}function r(){return"undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==t?t:{}}function i(e){if(s.call(this,e),this.query=this.query||{},!a){var t=r();a=t.___eio=t.___eio||[]}this.index=a.length;var n=this;a.push((function(e){n.onData(e)})),this.query.j=this.index,"function"==typeof addEventListener&&addEventListener("beforeunload",(function(){n.script&&(n.script.onerror=o)}),!1)}var s=n(13),c=n(23);e.exports=i;var a,u=/\n/g,p=/\\n/g;c(i,s),i.prototype.supportsBinary=!1,i.prototype.doClose=function(){this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),this.form&&(this.form.parentNode.removeChild(this.form),this.form=null,this.iframe=null),s.prototype.doClose.call(this)},i.prototype.doPoll=function(){var e=this,t=document.createElement("script");this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),t.async=!0,t.src=this.uri(),t.onerror=function(t){e.onError("jsonp poll error",t)};var n=document.getElementsByTagName("script")[0];n?n.parentNode.insertBefore(t,n):(document.head||document.body).appendChild(t),this.script=t,"undefined"!=typeof navigator&&/gecko/i.test(navigator.userAgent)&&setTimeout((function(){var e=document.createElement("iframe");document.body.appendChild(e),document.body.removeChild(e)}),100)},i.prototype.doWrite=function(e,t){function n(){o(),t()}function o(){if(r.iframe)try{r.form.removeChild(r.iframe)}catch(e){r.onError("jsonp polling iframe removal error",e)}try{var e='<iframe src="javascript:0" name="'+r.iframeId+'">';i=document.createElement(e)}catch(e){(i=document.createElement("iframe")).name=r.iframeId,i.src="javascript:0"}i.id=r.iframeId,r.form.appendChild(i),r.iframe=i}var r=this;if(!this.form){var i,s=document.createElement("form"),c=document.createElement("textarea"),a=this.iframeId="eio_iframe_"+this.index;s.className="socketio",s.style.position="absolute",s.style.top="-1000px",s.style.left="-1000px",s.target=a,s.method="POST",s.setAttribute("accept-charset","utf-8"),c.name="d",s.appendChild(c),document.body.appendChild(s),this.form=s,this.area=c}this.form.action=this.uri(),o(),e=e.replace(p,"\\\n"),this.area.value=e.replace(u,"\\n");try{this.form.submit()}catch(e){}this.iframe.attachEvent?this.iframe.onreadystatechange=function(){"complete"===r.iframe.readyState&&n()}:this.iframe.onload=n}}).call(t,function(){return this}())},function(e,t,n){"use strict";function o(e){var t=e&&e.forceBase64;u&&!t||(this.supportsBinary=!1),r.call(this,e)}var r=n(14),i=n(22),s=n(15),c=n(23),a=n(24);n(4)("engine.io-client:polling"),e.exports=o;var u=null!=new(n(25))({xdomain:!1}).responseType;c(o,r),o.prototype.name="polling",o.prototype.doOpen=function(){this.poll()},o.prototype.pause=function(e){function t(){n.readyState="paused",e()}var n=this;if(this.readyState="pausing",this.polling||!this.writable){var o=0;this.polling&&(o++,this.once("pollComplete",(function(){--o||t()}))),this.writable||(o++,this.once("drain",(function(){--o||t()})))}else t()},o.prototype.poll=function(){this.polling=!0,this.doPoll(),this.emit("poll")},o.prototype.onData=function(e){var t=this;s.decodePayload(e,this.socket.binaryType,(function(e,n,o){return"opening"===t.readyState&&t.onOpen(),"close"===e.type?(t.onClose(),!1):void t.onPacket(e)})),"closed"!==this.readyState&&(this.polling=!1,this.emit("pollComplete"),"open"===this.readyState&&this.poll())},o.prototype.doClose=function(){function e(){t.write([{type:"close"}])}var t=this;"open"===this.readyState?e():this.once("open",e)},o.prototype.write=function(e){var t=this;this.writable=!1;var n=function(){t.writable=!0,t.emit("drain")};s.encodePayload(e,this.supportsBinary,(function(e){t.doWrite(e,n)}))},o.prototype.uri=function(){var e=this.query||{},t=this.secure?"https":"http",n="";return!1!==this.timestampRequests&&(e[this.timestampParam]=a()),this.supportsBinary||e.sid||(e.b64=1),e=i.encode(e),this.port&&("https"===t&&443!==Number(this.port)||"http"===t&&80!==Number(this.port))&&(n=":"+this.port),e.length&&(e="?"+e),t+"://"+(-1!==this.hostname.indexOf(":")?"["+this.hostname+"]":this.hostname)+n+this.path+e}},function(e,t,n){"use strict";function o(e){this.path=e.path,this.hostname=e.hostname,this.port=e.port,this.secure=e.secure,this.query=e.query,this.timestampParam=e.timestampParam,this.timestampRequests=e.timestampRequests,this.readyState="",this.agent=e.agent||!1,this.socket=e.socket,this.enablesXDR=e.enablesXDR,this.pfx=e.pfx,this.key=e.key,this.passphrase=e.passphrase,this.cert=e.cert,this.ca=e.ca,this.ciphers=e.ciphers,this.rejectUnauthorized=e.rejectUnauthorized,this.forceNode=e.forceNode,this.isReactNative=e.isReactNative,this.extraHeaders=e.extraHeaders,this.localAddress=e.localAddress}var r=n(15),i=n(6);e.exports=o,i(o.prototype),o.prototype.onError=function(e,t){var n=new Error(e);return n.type="TransportError",n.description=t,this.emit("error",n),this},o.prototype.open=function(){return"closed"!==this.readyState&&""!==this.readyState||(this.readyState="opening",this.doOpen()),this},o.prototype.close=function(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this},o.prototype.send=function(e){if("open"!==this.readyState)throw new Error("Transport not open");this.write(e)},o.prototype.onOpen=function(){this.readyState="open",this.writable=!0,this.emit("open")},o.prototype.onData=function(e){var t=r.decodePacket(e,this.socket.binaryType);this.onPacket(t)},o.prototype.onPacket=function(e){this.emit("packet",e)},o.prototype.onClose=function(){this.readyState="closed",this.emit("close")}},function(e,t,n){"use strict";function o(e,t,n){for(var o=new Array(e.length),r=s(e.length,n),i=function(e,n,r){t(n,(function(t,n){o[e]=n,r(t,o)}))},c=0;c<e.length;c++)i(c,e[c],r)}var r=n(16),i=n(17),s=n(19),c=n(20);"undefined"!=typeof navigator&&/Android/i.test(navigator.userAgent),"undefined"!=typeof navigator&&/PhantomJS/i.test(navigator.userAgent),t.protocol=3;var a=t.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6},u=r(a),p={type:"error",data:"parser error"},h=n(21);t.encodePacket=function(e,t,n,o){"function"==typeof t&&(o=t,t=!1),"function"==typeof n&&(o=n,n=null);var r=(void 0===e.data||e.data.buffer||e.data,a[e.type]);return void 0!==e.data&&(r+=n?c.encode(String(e.data),{strict:!1}):String(e.data)),o(""+r)},t.decodePacket=function(e,t,n){if(void 0===e)return p;if("string"==typeof e){if(n&&!1===(e=function(e){try{e=c.decode(e,{strict:!1})}catch(e){return!1}return e}(e)))return p;var o=e.charAt(0);return Number(o)==o&&u[o]?e.length>1?{type:u[o],data:e.substring(1)}:{type:u[o]}:p}o=new Uint8Array(e)[0];var r=sliceBuffer(e,1);return h&&"blob"===t&&(r=new h([r])),{type:u[o],data:r}},t.encodePayload=function(e,n,r){"function"==typeof n&&(r=n,n=null);var s=i(e);return e.length?void o(e,(function(e,o){t.encodePacket(e,!!s&&n,!0,(function(e){o(null,function(e){return e.length+":"+e}(e))}))}),(function(e,t){return r(t.join(""))})):r("0:")},t.decodePayload=function(e,n,o){var r;if("function"==typeof n&&(o=n,n=null),""===e)return o(p,0,1);for(var i,s,c="",a=0,u=e.length;a<u;a++){var h=e.charAt(a);if(":"===h){if(""===c||c!=(i=Number(c)))return o(p,0,1);if(c!=(s=e.substr(a+1,i)).length)return o(p,0,1);if(s.length){if(r=t.decodePacket(s,n,!0),p.type===r.type&&p.data===r.data)return o(p,0,1);if(!1===o(r,a+i,u))return}a+=i,c=""}else c+=h}return""!==c?o(p,0,1):void 0}},function(e,t){"use strict";e.exports=Object.keys||function(e){var t=[],n=Object.prototype.hasOwnProperty;for(var o in e)n.call(e,o)&&t.push(o);return t}},function(e,t,n){var o=n(18),r=Object.prototype.toString,i="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===r.call(Blob),s="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===r.call(File);e.exports=function e(t){if(!t||"object"!=typeof t)return!1;if(o(t)){for(var n=0,r=t.length;n<r;n++)if(e(t[n]))return!0;return!1}if("function"==typeof Buffer&&Buffer.isBuffer&&Buffer.isBuffer(t)||"function"==typeof ArrayBuffer&&t instanceof ArrayBuffer||i&&t instanceof Blob||s&&t instanceof File)return!0;if(t.toJSON&&"function"==typeof t.toJSON&&1===arguments.length)return e(t.toJSON(),!0);for(var c in t)if(Object.prototype.hasOwnProperty.call(t,c)&&e(t[c]))return!0;return!1}},function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},function(e,t){function n(){}e.exports=function(e,t,o){function r(e,n){if(r.count<=0)throw new Error("after called too many times");--r.count,e?(i=!0,t(e),t=o):0!==r.count||i||t(null,n)}var i=!1;return o=o||n,r.count=e,0===e?t():r}},function(e,t){"use strict";function n(e){for(var t,n,o=[],r=0,i=e.length;r<i;)(t=e.charCodeAt(r++))>=55296&&t<=56319&&r<i?56320==(64512&(n=e.charCodeAt(r++)))?o.push(((1023&t)<<10)+(1023&n)+65536):(o.push(t),r--):o.push(t);return o}function o(e,t){if(e>=55296&&e<=57343){if(t)throw Error("Lone surrogate U+"+e.toString(16).toUpperCase()+" is not a scalar value");return!1}return!0}function r(e,t){return h(e>>t&63|128)}function i(e,t){if(0==(4294967168&e))return h(e);var n="";return 0==(4294965248&e)?n=h(e>>6&31|192):0==(4294901760&e)?(o(e,t)||(e=65533),n=h(e>>12&15|224),n+=r(e,6)):0==(4292870144&e)&&(n=h(e>>18&7|240),n+=r(e,12),n+=r(e,6)),n+h(63&e|128)}function s(){if(p>=u)throw Error("Invalid byte index");var e=255&a[p];if(p++,128==(192&e))return 63&e;throw Error("Invalid continuation byte")}function c(e){var t,n;if(p>u)throw Error("Invalid byte index");if(p==u)return!1;if(t=255&a[p],p++,0==(128&t))return t;if(192==(224&t)){if((n=(31&t)<<6|s())>=128)return n;throw Error("Invalid continuation byte")}if(224==(240&t)){if((n=(15&t)<<12|s()<<6|s())>=2048)return o(n,e)?n:65533;throw Error("Invalid continuation byte")}if(240==(248&t)&&(n=(7&t)<<18|s()<<12|s()<<6|s())>=65536&&n<=1114111)return n;throw Error("Invalid UTF-8 detected")}/*! https://mths.be/utf8js v2.1.2 by @mathias */
    var a,u,p,h=String.fromCharCode;e.exports={version:"2.1.2",encode:function(e,t){for(var o=!1!==(t=t||{}).strict,r=n(e),s=r.length,c=-1,a="";++c<s;)a+=i(r[c],o);return a},decode:function(e,t){var o=!1!==(t=t||{}).strict;a=n(e),u=a.length,p=0;for(var r,i=[];!1!==(r=c(o));)i.push(r);return function(e){for(var t,n=e.length,o=-1,r="";++o<n;)(t=e[o])>65535&&(r+=h((t-=65536)>>>10&1023|55296),t=56320|1023&t),r+=h(t);return r}(i)}}},function(e,t){function n(e){return e.map((function(e){if(e.buffer instanceof ArrayBuffer){var t=e.buffer;if(e.byteLength!==t.byteLength){var n=new Uint8Array(e.byteLength);n.set(new Uint8Array(t,e.byteOffset,e.byteLength)),t=n.buffer}return t}return e}))}function o(e,t){t=t||{};var o=new i;return n(e).forEach((function(e){o.append(e)})),t.type?o.getBlob(t.type):o.getBlob()}function r(e,t){return new Blob(n(e),t||{})}var i=void 0!==i?i:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder&&MozBlobBuilder,s=function(){try{return 2===new Blob(["hi"]).size}catch(e){return!1}}(),c=s&&function(){try{return 2===new Blob([new Uint8Array([1,2])]).size}catch(e){return!1}}(),a=i&&i.prototype.append&&i.prototype.getBlob;"undefined"!=typeof Blob&&(o.prototype=Blob.prototype,r.prototype=Blob.prototype),e.exports=s?c?Blob:r:a?o:void 0},function(e,t){t.encode=function(e){var t="";for(var n in e)e.hasOwnProperty(n)&&(t.length&&(t+="&"),t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t},t.decode=function(e){for(var t={},n=e.split("&"),o=0,r=n.length;o<r;o++){var i=n[o].split("=");t[decodeURIComponent(i[0])]=decodeURIComponent(i[1])}return t}},function(e,t){e.exports=function(e,t){var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},function(e,t){"use strict";function n(e){var t="";do{t=i[e%s]+t,e=Math.floor(e/s)}while(e>0);return t}function o(){var e=n(+new Date);return e!==r?(a=0,r=e):e+"."+n(a++)}for(var r,i="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),s=64,c={},a=0,u=0;u<s;u++)c[i[u]]=u;o.encode=n,o.decode=function(e){var t=0;for(u=0;u<e.length;u++)t=t*s+c[e.charAt(u)];return t},e.exports=o},function(e,t,n){"use strict";var o=n(26);e.exports=function(e){var t=e.xdomain,n=e.xscheme,r=e.enablesXDR;try{if("undefined"!=typeof XMLHttpRequest&&(!t||o))return new XMLHttpRequest}catch(e){}try{if("undefined"!=typeof XDomainRequest&&!n&&r)return new XDomainRequest}catch(e){}if(!t)try{return new(self[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(e){}}},function(e,t){try{e.exports="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(t){e.exports=!1}},function(e,t,n){"use strict";function o(e){e&&e.forceBase64&&(this.supportsBinary=!1),("undefined"==typeof uni&&"undefined"==typeof wx||"undefined"!=typeof WebSocket)&&(this.perMessageDeflate=e.perMessageDeflate,this.usingBrowserWebSocket=r&&!e.forceNode,this.protocols=e.protocols,this.usingBrowserWebSocket||(f=i)),c.call(this,e)}var r,i,s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c=n(14),a=n(15),u=n(22),p=n(23),h=n(24);if(n(4)("engine.io-client:websocket"),"undefined"==typeof uni&&"undefined"==typeof wx||"undefined"!=typeof WebSocket)if("undefined"!=typeof WebSocket)r=WebSocket;else if("undefined"!=typeof self)r=self.WebSocket||self.MozWebSocket;else try{i=n(28)}catch(e){}var f=r||i;"undefined"==typeof uni&&"undefined"==typeof wx||"undefined"!=typeof WebSocket||(f=function(e){var t=this;if(t.onopen=function(){},t.onclose=function(){},t.onmessage=function(e){},t.onerror=function(e){},"object"===("undefined"==typeof tt?"undefined":s(tt))&&tt.getSystemInfo){var n=tt.connectSocket({url:e});t.send=function(e){n.send({data:e})},t.close=function(){n.close()},n.onOpen((function(){t.onopen()})),n.onError((function(e){t.onerror(e)})),n.onMessage((function(e){t.onmessage(e)})),n.onClose((function(){t.onclose()}))}else"undefined"!=typeof uni?(t.send=function(e){uni.sendSocketMessage({data:e})},t.close=function(){uni.closeSocket()},uni.onSocketOpen((function(e){t.onopen()})),uni.onSocketError((function(e){t.onerror(e)})),uni.onSocketMessage((function(e){t.onmessage(e)})),uni.onSocketClose((function(e){t.onclose()})),uni.connectSocket({url:e})):(t.send=function(e){wx.sendSocketMessage({data:e})},t.close=function(){wx.closeSocket()},wx.onSocketOpen((function(e){t.onopen()})),wx.onSocketError((function(e){t.onerror(e)})),wx.onSocketMessage((function(e){t.onmessage(e)})),wx.onSocketClose((function(e){t.onclose()})),wx.connectSocket({url:e}))}),e.exports=o,p(o,c),o.prototype.name="websocket",o.prototype.supportsBinary=!1,o.prototype.doOpen=function(){if(this.check()){var e,t,n=this.uri();("undefined"==typeof uni&&"undefined"==typeof wx||"undefined"!=typeof WebSocket)&&(e=this.protocols),(t="undefined"==typeof uni&&"undefined"==typeof wx||"undefined"!=typeof WebSocket?{agent:this.agent,perMessageDeflate:this.perMessageDeflate}:{agent:this.agent}).pfx=this.pfx,t.key=this.key,t.passphrase=this.passphrase,t.cert=this.cert,t.ca=this.ca,t.ciphers=this.ciphers,t.rejectUnauthorized=this.rejectUnauthorized,this.extraHeaders&&(t.headers=this.extraHeaders),this.localAddress&&(t.localAddress=this.localAddress);try{"undefined"==typeof uni&&"undefined"==typeof wx||"undefined"!=typeof WebSocket?this.ws=this.usingBrowserWebSocket&&!this.isReactNative?e?new f(n,e):new f(n):new f(n,e,t):this.ws=new f(n)}catch(e){return this.emit("error",e)}void 0===this.ws.binaryType&&(this.supportsBinary=!1),this.ws.supports&&this.ws.supports.binary?(this.supportsBinary=!0,this.ws.binaryType="nodebuffer"):this.ws.binaryType="arraybuffer",this.addEventListeners()}},o.prototype.addEventListeners=function(){var e=this;this.ws.onopen=function(){e.onOpen()},this.ws.onclose=function(){e.onClose()},this.ws.onmessage=function(t){e.onData(t.data)},this.ws.onerror=function(t){e.onError("websocket error",t)}},o.prototype.write=function(e){var t=this;this.writable=!1;for(var n=e.length,o=0,r=n;o<r;o++)!function(e){a.encodePacket(e,t.supportsBinary,(function(o){if("undefined"==typeof uni&&"undefined"==typeof wx||"undefined"!=typeof WebSocket){if(!t.usingBrowserWebSocket){var r={};e.options&&(r.compress=e.options.compress),t.perMessageDeflate&&("string"==typeof o?Buffer.byteLength(o):o.length)<t.perMessageDeflate.threshold&&(r.compress=!1)}try{t.usingBrowserWebSocket?t.ws.send(o):t.ws.send(o,r)}catch(e){}}else try{t.ws.send(o)}catch(e){}--n||(t.emit("flush"),setTimeout((function(){t.writable=!0,t.emit("drain")}),0))}))}(e[o])},o.prototype.onClose=function(){c.prototype.onClose.call(this)},o.prototype.doClose=function(){void 0!==this.ws&&this.ws.close()},o.prototype.uri=function(){var e=this.query||{},t=this.secure?"wss":"ws",n="";return this.port&&("wss"===t&&443!==Number(this.port)||"ws"===t&&80!==Number(this.port))&&(n=":"+this.port),this.timestampRequests&&(e[this.timestampParam]=h()),this.supportsBinary||(e.b64=1),(e=u.encode(e)).length&&(e="?"+e),t+"://"+(-1!==this.hostname.indexOf(":")?"["+this.hostname+"]":this.hostname)+n+this.path+e},o.prototype.check=function(){return!(!f||"__initialize"in f&&this.name===o.prototype.name)}},function(e,t){},function(e,t){var n=[].indexOf;e.exports=function(e,t){if(n)return e.indexOf(t);for(var o=0;o<e.length;++o)if(e[o]===t)return o;return-1}},function(e,t,n){"use strict";function o(e,t,n){this.io=e,this.nsp=t,this.json=this,this.ids=0,this.acks={},this.receiveBuffer=[],this.sendBuffer=[],this.connected=!1,this.disconnected=!0,this.flags={},n&&n.query&&(this.query=n.query),this.io.autoConnect&&this.open()}var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=n(5),s=n(6),c=n(31),a=n(32),u=n(33),p=(n(4)("socket.io-client:socket"),n(22)),h=n(17);e.exports=o;var f={connect:1,connect_error:1,connect_timeout:1,connecting:1,disconnect:1,error:1,reconnect:1,reconnect_attempt:1,reconnect_failed:1,reconnect_error:1,reconnecting:1,ping:1,pong:1},l=s.prototype.emit;s(o.prototype),o.prototype.subEvents=function(){if(!this.subs){var e=this.io;this.subs=[a(e,"open",u(this,"onopen")),a(e,"packet",u(this,"onpacket")),a(e,"close",u(this,"onclose"))]}},o.prototype.open=o.prototype.connect=function(){return this.connected||(this.subEvents(),this.io.open(),"open"===this.io.readyState&&this.onopen(),this.emit("connecting")),this},o.prototype.send=function(){var e=c(arguments);return e.unshift("message"),this.emit.apply(this,e),this},o.prototype.emit=function(e){if(f.hasOwnProperty(e))return l.apply(this,arguments),this;var t=c(arguments),n={type:(void 0!==this.flags.binary?this.flags.binary:h(t))?i.BINARY_EVENT:i.EVENT,data:t,options:{}};return n.options.compress=!this.flags||!1!==this.flags.compress,"function"==typeof t[t.length-1]&&(this.acks[this.ids]=t.pop(),n.id=this.ids++),this.connected?this.packet(n):this.sendBuffer.push(n),this.flags={},this},o.prototype.packet=function(e){e.nsp=this.nsp,this.io.packet(e)},o.prototype.onopen=function(){if("/"!==this.nsp)if(this.query){var e="object"===r(this.query)?p.encode(this.query):this.query;this.packet({type:i.CONNECT,query:e})}else this.packet({type:i.CONNECT})},o.prototype.onclose=function(e){this.connected=!1,this.disconnected=!0,delete this.id,this.emit("disconnect",e)},o.prototype.onpacket=function(e){var t=e.nsp===this.nsp,n=e.type===i.ERROR&&"/"===e.nsp;if(t||n)switch(e.type){case i.CONNECT:this.onconnect();break;case i.EVENT:case i.BINARY_EVENT:this.onevent(e);break;case i.ACK:case i.BINARY_ACK:this.onack(e);break;case i.DISCONNECT:this.ondisconnect();break;case i.ERROR:this.emit("error",e.data)}},o.prototype.onevent=function(e){var t=e.data||[];null!=e.id&&t.push(this.ack(e.id)),this.connected?l.apply(this,t):this.receiveBuffer.push(t)},o.prototype.ack=function(e){var t=this,n=!1;return function(){if(!n){n=!0;var o=c(arguments);t.packet({type:h(o)?i.BINARY_ACK:i.ACK,id:e,data:o})}}},o.prototype.onack=function(e){var t=this.acks[e.id];"function"==typeof t&&(t.apply(this,e.data),delete this.acks[e.id])},o.prototype.onconnect=function(){this.connected=!0,this.disconnected=!1,this.emit("connect"),this.emitBuffered()},o.prototype.emitBuffered=function(){var e;for(e=0;e<this.receiveBuffer.length;e++)l.apply(this,this.receiveBuffer[e]);for(this.receiveBuffer=[],e=0;e<this.sendBuffer.length;e++)this.packet(this.sendBuffer[e]);this.sendBuffer=[]},o.prototype.ondisconnect=function(){this.destroy(),this.onclose("io server disconnect")},o.prototype.destroy=function(){if(this.subs){for(var e=0;e<this.subs.length;e++)this.subs[e].destroy();this.subs=null}this.io.destroy(this)},o.prototype.close=o.prototype.disconnect=function(){return this.connected&&this.packet({type:i.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this},o.prototype.compress=function(e){return this.flags.compress=e,this},o.prototype.binary=function(e){return this.flags.binary=e,this}},function(e,t){e.exports=function(e,t){for(var n=[],o=(t=t||0)||0;o<e.length;o++)n[o-t]=e[o];return n}},function(e,t){"use strict";e.exports=function(e,t,n){return e.on(t,n),{destroy:function(){e.removeListener(t,n)}}}},function(e,t){var n=[].slice;e.exports=function(e,t){if("string"==typeof t&&(t=e[t]),"function"!=typeof t)throw new Error("bind() requires a function");var o=n.call(arguments,2);return function(){return t.apply(e,o.concat(n.call(arguments)))}}},function(e,t){function n(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}e.exports=n,n.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),n=Math.floor(t*this.jitter*e);e=0==(1&Math.floor(10*t))?e-n:e+n}return 0|Math.min(e,this.max)},n.prototype.reset=function(){this.attempts=0},n.prototype.setMin=function(e){this.ms=e},n.prototype.setMax=function(e){this.max=e},n.prototype.setJitter=function(e){this.jitter=e}},function(e,t,n){var o,r,i=n(36),s=n(37),c=0,a=0;e.exports=function(e,t,n){var u=t&&n||0,p=t||[],h=(e=e||{}).node||o,f=void 0!==e.clockseq?e.clockseq:r;if(null==h||null==f){var l=i();null==h&&(h=o=[1|l[0],l[1],l[2],l[3],l[4],l[5]]),null==f&&(f=r=16383&(l[6]<<8|l[7]))}var d=void 0!==e.msecs?e.msecs:(new Date).getTime(),y=void 0!==e.nsecs?e.nsecs:a+1,m=d-c+(y-a)/1e4;if(m<0&&void 0===e.clockseq&&(f=f+1&16383),(m<0||d>c)&&void 0===e.nsecs&&(y=0),y>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");c=d,a=y,r=f;var g=(1e4*(268435455&(d+=122192928e5))+y)%4294967296;p[u++]=g>>>24&255,p[u++]=g>>>16&255,p[u++]=g>>>8&255,p[u++]=255&g;var v=d/4294967296*1e4&268435455;p[u++]=v>>>8&255,p[u++]=255&v,p[u++]=v>>>24&15|16,p[u++]=v>>>16&255,p[u++]=f>>>8|128,p[u++]=255&f;for(var b=0;b<6;++b)p[u+b]=h[b];return t||s(p)}},function(e,t){var n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof smsCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(n){var o=new Uint8Array(16);e.exports=function(){return n(o),o}}else{var r=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),r[t]=e>>>((3&t)<<3)&255;return r}}},function(e,t){for(var n=[],o=0;o<256;++o)n[o]=(o+256).toString(16).substr(1);e.exports=function(e,t){var o=t||0,r=n;return[r[e[o++]],r[e[o++]],r[e[o++]],r[e[o++]],"-",r[e[o++]],r[e[o++]],"-",r[e[o++]],r[e[o++]],"-",r[e[o++]],r[e[o++]],"-",r[e[o++]],r[e[o++]],r[e[o++]],r[e[o++]],r[e[o++]],r[e[o++]]].join("")}}])},function(e,t,n){"use strict";n.r(t);var o="undefined"!=typeof window&&window.navigator.userAgent.toLowerCase(),r=(o&&/msie|trident/.test(o),o&&o.indexOf("msie 9.0"),o&&o.indexOf("edge/")>0),i=(o&&/chrome\/\d+/.test(o),o&&o.match(/firefox\/(\d+)/),{silent:!0,logLevel:0}),s="undefined"!=typeof console;function c(e){s&&!i.silent&&i.logLevel<3&&console.log("[GoEasyIM info]:"+e)}function a(e){s&&!i.silent&&i.logLevel<2&&console.warn("[GoEasyIM warn]:"+e)}function u(e){s&&!i.silent&&i.logLevel<1&&console.error("[GoEasyIM error]:"+e)}var p=n(0),h=n.n(p);function f(e){return"string"==typeof e||"number"==typeof e||"symbol"===h()(e)||"boolean"==typeof e}function l(e){return null!=e}function d(e){return null!==e&&"object"===h()(e)}function y(e){return"string"==typeof e||"number"==typeof e}function m(e){return"string"==typeof e}function g(e){return"number"==typeof e}function v(e){return Array.isArray(e)?0==e.length:d(e)?!l(e):!g(e)&&(m(e)?""==e.trim():void 0)}var b,S="undefined"!=typeof Promise&&("function"==typeof(b=Promise)&&/native code/.test(b.toString()));function E(e){if(!S)return u("native Promise is not available"),null;var t,n=new Promise(e);if(l(t=n)&&"function"==typeof t.then&&"function"==typeof t.catch)return n;u("parameter require a Promise")}var k=n(1),w=n.n(k),I={PRIVATE_MESSAGE_RECEIVED:"PRIVATE_MESSAGE_RECEIVED",GROUP_MESSAGE_RECEIVED:"GROUP_MESSAGE_RECEIVED",SYSTEM_MESSAGE_RECEIVED:"SYSTEM_MESSAGE_RECEIVED",CONNECTED:"CONNECTED",DISCONNECTED:"DISCONNECTED",USER_PRESENCE:"USER_PRESENCE",GROUP_PRESENCE:"GROUP_PRESENCE"};function _(e,t){e.socket.on("imMessage",(function(n){var o=null;if("string"==typeof n&&(o=JSON.parse(n)),!e.receivedGuids.unshiftGuid(o.i)){o.a&&e.socket.emit("imAck",{publishGuid:o.i});var r="private"==o.t?I.PRIVATE_MESSAGE_RECEIVED:I.SYSTEM_MESSAGE_RECEIVED;t._events[r]&&t._events[r](function(e){if(!l(e))return null;try{return{timestamp:e.ts,senderId:e.s,payload:JSON.parse(e.p),receiverId:e.r}}catch(e){return e}}(o))}}))}function N(e,t){var n=I.GROUP_MESSAGE_RECEIVED;e._events[n]&&e._events[n](function(e){var t="string"===e?JSON.parse(e):e;m(t.content)&&(t.content=JSON.parse(t.content));return{timestamp:t.time,senderId:t.senderId,groupId:t.channel,payload:t.content}}(t))}var M,R=null;function C(e,t,n){var o="";if(!l(w.a))return u(o="please call connect() first."),void n({code:408,content:o});R=new w.a({appkey:e.appkey,host:e.host,userId:e.user.id,otp:e.user.otp,type:e.type,userData:JSON.stringify(e.user.data),onConnected:function(){var n,r;c(o="GoEasy connection successful [GoEasyIM.connect]."),_(R,e.im),n=e.im,r=I.CONNECTED,n._events[r]&&n._events[r](),t()},onDisconnected:function(){var t,r;c(o="GoEasy disconnected [GoEasyIM.connect]."),t=e.im,r=I.DISCONNECTED,t._events[r]&&t._events[r](),n({code:400,content:o})},onConnectFailed:function(e){u(o="Failed to connect GoEasy [GoEasyIM connect]."),n(e||{code:408,content:"Failed to connect GoEasy"})}})}function x(e,t,n){var o="";if(!l(R))return u(o="please call connect() first."),void n({code:408,content:o});R.tryEmit("publishIM",function(e,t,n){return{t:n,to:e,p:JSON.stringify(t.payload),guid:R.uuid_goeasy()}}(e.to,e.message,e.type),(function(e){u(o="Failed to send private message."),n(e||{code:408,content:o})}),(function(e){200==e.resultCode?(c("Private message sent successful."),t()):n(e)}))}function A(e,t,n){var o="";if(!l(R))return u(o="please call connect() first."),void n({code:408,content:o});R.subscribePresence({channels:e.channels,onPresence:function(t){var n,o;"private"==e.type?(n=e.im,(o=t)&&o.events&&o.events.map((function(e){var t=I.USER_PRESENCE;n._events[t]&&n._events[t](e)}))):function(e,t){t&&t.events&&t.events.map((function(n){var o=I.GROUP_PRESENCE;n.groupOnlineCount=t.userAmount,n.groupId=t.channel,e._events[o]&&e._events[o](n)}))}(e.im,t)},onSuccess:function(){c("Subscribe user presence successful."),t()},onFailed:function(e){u("Failed to subscribe user presence."),n(e||{code:408,content:"Failed to subscribe user presence"})}})}function O(e,t,n){var o="";if(!l(R))return u(o="please call connect() first."),void n({code:408,content:o});R.unsubscribePresence({channel:e,onSuccess:function(){c("Unsubscribe user presence successful."),t()},onFailed:function(e){u("Failed to unsubscribe user presence."),n(e||{code:408,content:"Failed to unsubscribe user presence"})}})}function T(e,t){this._appKey=e,this._host=t}(M=T).prototype.connect=function(e){var t=this;return E((function(n,o){var r="";return d(e)?y(e.id)?(g(e.id)&&(e.id=e.id.toString()),e.data=l(e.data)?e.data:{},(d(e.data)?JSON.stringify(e.data).length:e.data.length)>300?(u(r="user.data-length limit 300 [GoEasyIM.connect]."),void o({code:400,content:r})):void C({appkey:t._appKey,host:t._host,type:"im",im:t,user:e},n,o)):(u(r='The argument "user.id" should be a "number" or "string" [GoEasyIM.connect].'),void o({code:400,content:r})):(u(r='The argument "user" should be an object [GoEasyIM.connect].'),void o({code:400,content:r}))}))},M.prototype.disconnect=function(){return E((function(e,t){try{R.disconnect(),c("dGoEasy has been connected [GoEasyIM.disconnect]"),e()}catch(e){u("disconnect failed"),t(e||{code:408,content:"disconnect failed"})}}))},M.prototype.createMessage=function(e){return(d(e)?JSON.stringify(e).length:e.length)>3072?(u("message-length limit 3kib"),null):{payload:e}},M.prototype.createFileMessage=function(e){return(e&&e.size||0)>31457280?(u("message-length limit 30mib"),null):{payload:message}},M.prototype.history=function(e){return E((function(t,n){var o="";return e.groupId||e.friendId?e.groupId&&e.friendId?(u(o="The argument can have only groupId or friendId [GoEasyIM.history]."),void n({code:400,content:o})):(l(e.groupId)&&g(e.groupId)&&(e.groupId=e.groupId.toString()),l(e.friendId)&&g(e.friendId)&&(e.friendId=e.friendId.toString()),l(e.limit)||(e.limit=10),e.limit>30&&(e.limit=30),void function(e,t,n){var o="";if(!l(R))return u(o="please call connect() first."),void n({code:408,content:o});R.tryEmit("imHistory",e,(function(e){a("Failed to query message [GoEasyIM.history]."),n(e||{code:408,content:"Failed to query message"})}),(function(e){if(200==e.code){var o=[];e&&e.content&&e.content.map((function(e){var t=Object.create(null);t.timestamp=e.ts,t.senderId=e.s,t.payload=JSON.parse(e.p),o.push(t)})),t({code:e.code,content:o})}else n(e)}))}(e,t,n)):(u(o="The argument 'groupId' or 'friendId' required [GoEasyIM.history]."),void n({code:400,content:o}))}))},M.prototype.sendSystemMessage=function(e,t){return E((function(n,o){var r="";return y(e)?d(t)?v(t.payload)?(u(r="The argument 'message.payload' can not be empty [GoEasyIM.sendSystemMessage]."),o({code:400,content:r}),!1):(d(t.payload)?JSON.stringify(t.payload).length:t.payload.length)>3072?(u(r="message-length limit 3kb"),void o({code:400,content:r})):void x({to:e,message:t,type:"system"},n,o):(u(r="The argument 'message' should be an 'Object' [GoEasyIM.sendSystemMessage]."),o({code:400,content:r}),!1):(u(r="The argument 'userId' should be a 'string' or 'number' [GoEasyIM.sendSystemMessage]"),o({code:400,content:r}),!1)}))},function(e){e.prototype.on=function(e,t){return m(e)?l(I[e])?(this._events[e]=t,this):(u("event not found [GoEasyIM.on]"),!1):(u("The argument 'eventType' should be a 'string' [GoEasyIM.on]."),!1)}}(T),function(e){e.prototype.sendPrivateMessage=function(e,t){var n=this;return E((function(o,r){var i="The argument 'userId' should be a 'string' or 'number' [GoEasyIM.sendPrivateMessage].";return y(e)?d(t)?v(t.payload)?(u(i="The argument 'message.payload' cannot be empty [GoEasyIM.sendPrivateMessage]."),void r({code:400,content:i})):(d(t.payload)?JSON.stringify(t.payload).length:t.payload.length)>3072?(u(i="message-length limit 3kb"),void r({code:400,content:i})):n._userId==e?(u(i="The argument 'userId' can not equal to your id [GoEasyIM.sendPrivateMessage]."),void r({code:400,content:i})):void x({to:e,message:t,type:"private"},o,r):(u(i="The argument 'message' should be an 'object' [GoEasyIM.sendPrivateMessage]."),void r({code:400,content:i})):(u(i),void r({code:400,content:i}))}))},e.prototype.subscribeUserPresence=function(e){var t=this;return E((function(n,o){var r="";if(!Array.isArray(e)||0==e.length)return u(r="The argument 'userIds' should be an 'Array' [GoEasyIM.subscribeUserPresence]."),o({code:400,content:r}),!1;for(var i=0;i<e.length;i++){if(!y(e[i]))return u(r="The argument 'userId' should be a 'string or 'number' [GoEasyIM.subscribeUserPresence]."),o({code:400,content:r}),!1;g(e[i])&&(e[i]=e[i].toString())}A({channels:e,im:t,type:"private"},n,o)}))},e.prototype.unsubscribeUserPresence=function(e){return E((function(t,n){if(!y(e)){var o="The argument 'userId' should be a 'string' or 'number' [GoEasyIM.unsubscribeUserPresence].";return u(o),void n({code:400,content:o})}g(e)&&(e=e.toString()),O(e,t,n)}))},e.prototype.hereNow=function(e){return E((function(t,n){var o="";if(!Array.isArray(e.userIds))return u(o="The argument 'userIds' should be an 'Array' [GoEasyIM.hereNow]."),void n({code:400,content:o});if(e.userIds.length>50)return u(o=" The argument 'userIds' max size is 50 [GoEasyIM.hereNow]."),void n({code:400,content:o});for(var r=0;r<e.userIds.length;r++){if(!y(e.userIds[r]))return u(o="The argument userIds.item should be a 'string' or 'number' [GoEasyIM.hereNow]."),void n({code:400,content:o});g(e.userIds[r])&&(e.userIds[r]=e.userIds[r].toString())}!function(e,t,n){var o="";if(!l(R))return u(o="please call connect() first."),void n({code:408,content:o});R.tryEmit("imHereNow",e,(function(e){a("Failed to query online users [GoEasyIM.hereNow]."),n(e||{code:408,content:"Failed to query online users"})}),(function(e){200==e.code?(c("Query online user list successful [GoEasyIM.hereNow]."),t(e)):n(e)}))}(e,t,n)}))}}(T),function(e){e.prototype.subscribeGroup=function(e){var t=this;return E((function(n,o){var r="";if(!Array.isArray(e)||0==e.length)return u(r="The argument 'groupIds' should be an 'array' [GoEasyIM.subscribeGroup]."),o({code:400,content:r}),!1;for(var i=0;i<e.length;i++){if(!y(e[i]))return u(r="The argument groupIds item should be a 'string' or 'number' [GoEasyIM.subscribeGroup]."),o(r),!1;g(e[i])&&(e[i]=e[i].toString())}!function(e,t,n){var o="";if(!l(R))return u(o="please call connect() first."),void n({code:408,content:o});R.subscribe({channels:e.channels,onMessage:function(t){N(e.im,t)},onSuccess:function(){c("Group message subscribe successful [GoEasyIM.subscribeGroup]."),t()},onFailed:function(e){u("Failed to subscribe group message [GoEasyIM.subscribeGroup]."),n(e||{code:408,content:"Failed to subscribe group message"})}})}({im:t,channels:e},n,o)}))},e.prototype.unsubscribeGroup=function(e){var t=this,n="";return E((function(o,r){if(!y(e))return u(n="The argument groupIds item should be a 'string' or 'number' [GoEasyIM.subscribeGroup]."),r(n),!1;g(e)&&(e=e.toString()),function(e,t,n){var o="";if(!l(R))return u(o="please call connect() first."),void n({code:408,content:o});R.unsubscribe({channel:e.channel,onSuccess:function(){c("Group message unsubscribe successful [GoEasyIM.unSubscribeGroup]."),t()},onFailed:function(e){u("Failed to unsubscribe group message [GoEasyIM.unSubscribeGroup]."),n(e||{code:408,content:"Failed to unsubscribe group message"})}})}({im:t,channel:e},o,r)}))},e.prototype.sendGroupMessage=function(e,t){return E((function(n,o){var r="";return d(t)?y(e)?("number"==typeof e&&(e=e.toString()),v(t.payload)?(u(r="The argument 'message.payload' cannot be empty [GoEasyIM.sendGroupMessage]."),void o({code:400,content:r})):(d(t.payload)?JSON.stringify(t.payload).length:t.payload.length)>3072?(u(r="message-length limit 3kb"),void o({code:400,content:r})):void function(e,t,n){var o="";if(!l(R))return u(o="please call connect() first."),void n({code:408,content:o});R.publish({channel:e.channel,message:JSON.stringify(e.message.payload),onSuccess:function(e){c("Send group message successful [GoEasyIM.sendGroupMessage]."),t()},onFailed:function(e){u("Failed to send Message [GoEasyIM.sendGroupMessage]."),n(e||{code:408,content:"Failed to send Message"})}})}({channel:e,message:t},n,o)):(u(r="The argument 'groupId' should be a 'string' or 'number' [GoEasyIM.sendGroupMessage]."),o({code:400,content:r}),!1):(u(r="The argument 'message' should be an 'Object' [GoEasyIM.sendGroupMessage]."),o({code:400,content:r}),!1)}))},e.prototype.subscribeGroupPresence=function(e){var t=this;return E((function(n,o){var r="";if(!Array.isArray(e)||0==e.length){var i="The argument 'groupIds' should be an 'array' [GoEasyIM.subscribeGroupPresence].";return u(i),o({code:400,content:i}),!1}for(var s=0;s<e.length;s++){if(!y(e[s]))return u(r="The argument groupIds item should be a 'string' or 'number' [GoEasyIM.subscribeGroupPresence]."),o({code:400,content:r}),!1;g(e[s])&&(e[s]=e[s].toString())}A({channels:e,im:t,type:"group"},n,o)}))},e.prototype.unsubscribeGroupPresence=function(e){return E((function(t,n){if(!y(e)){var o="The argument 'groupId' item should be a 'string' or 'number' [GoEasyIM.unsubscribeGroupPresence].";return u(o),n({code:400,content:o}),!1}g(e)&&(e=e.toString()),O(e,t,n)}))},e.prototype.groupHereNow=function(e){return E((function(t,n){if(!y(e)){var o="The argument 'groupId' item should be a 'string' or 'number' [GoEasyIM.groupHereNow].";return u(o),n({code:400,content:o}),!1}g(e)&&(e=groupIds.toString()),function(e,t,n){var o="";if(!l(R))return u(o="please call connect() first."),void n({code:408,content:o});R.tryEmit("imGroupHereNow",{groupId:e},(function(e){a("Failed to query online group users [GoEasyIM.groupHereNow]."),n(e||{code:408,content:"Failed to query online group users"})}),(function(e){200==e.code?(c("Query online group user list successful [GoEasyIM.groupHereNow]."),t(e)):n(e)}))}(e,t,n)}))},e.prototype.groupOnlineCount=function(e){return E((function(t,n){if(!y(e)){var o="The argument 'groupId' item should be a 'string' or 'number' [GoEasyIM.groupOnlineCount].";return u(o),n({code:400,content:o}),!1}g(e)&&(e=e.toString()),function(e,t,n){var o="";if(!l(R))return u(o="please call connect() first."),void n({code:408,content:o});R.tryEmit("imGroupOnlineCount",{groupId:e},(function(e){a("Failed to query online group users [GoEasyIM.groupOnlineCount]."),n(e||{code:408,content:"Failed to query online group users"})}),(function(e){200==e.code?(c("Query online group user list successful [GoEasyIM.groupOnlineCount]."),t(e)):n(e)}))}(e,t,n)}))}}(T);var B=T,G=null;function P(e){e.getInstance=function(t){var n="";if(!d(t))throw u(n='the parameter "options" is required [GoEasyIM.getInstance].'),Error(n);if(!f(t.appkey)||0==t.appkey.length)throw u(n="the parameter 'appkey' is required [GoEasyIM.getInstance]."),Error(n);if(!f(t.appkey)||0==t.appkey.length)throw u(n="the parameter 'host' is required [GoEasyIM.getInstance]."),Error(n);return null==G&&(G=new e(t.appkey,t.host),G._events=Object.create(null)),G.id="GoEasyIM_"+Date.now(),G}}!function(e){var t={get:function(){return i},set:function(){a("Do not replace the GoEasyIM.config object, set individual fields instead.")}};Object.defineProperty(e,"config",t),e.EVENT=Object.create(I),e.util={warn:a,log:c,error:u},P(e)}(B),B.version="1.0.3";t.default=B}]).default}));